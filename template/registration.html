<script>
  var config = {
    apiKey: "AIzaSyAoIBtOT5wcVNP3ujWILYbsWfvvzWYgth0",
    authDomain: "sqabbackend.firebaseapp.com",
    databaseURL: "https://sqabbackend.firebaseio.com",
    projectId: "sqabbackend",
    storageBucket: "sqabbackend.appspot.com",
    messagingSenderId: "680112495974",
  };

  firebase.initializeApp(config);

  const bodyContent =
    "The Society for the Quantitative Analyses of Behavior (SQAB) encourages diversity, inclusiveness, and freedom from discriminatory behavior in the field of behavioral science broadly, and within the organization specifically. Diversity refers to differences in race, ethnicity, sexual orientation, gender identity, age, country of origin, religious or spiritual beliefs, ability, and social and economic class. <br/><br/>Terms of Registration <br/><br/>All attendees at SQAB events are expected to abide by SQAB’s Ethics and Diversity policies. Discriminatory and derogatory language and behavior, as well as harassment of any kind, will not be tolerated at the SQAB conference. <br/><br/>Anyone registering for the SQAB conference is required to accepting the following:<br/><br/>Your registration is acceptance of responsibility. By registering for the SQAB conference, you agree to abide by SQAB’s Ethics and Diversity policies and understand that discriminatory and derogatory language and behavior, as well as harassment of any kind, will not be tolerated at SQAB. Failure to comply with the policy could result in suspension of membership to SQAB, revocation of rights to attend or submit future work to SQAB, and/or removal from the event, pursuant to Board consensus in consideration of the violation. <br/><br/>SQAB’s Ethics and Diversity Policy and its Terms of Registration were approved by the SQAB Executive Board in 2018 and were based on those developed by ABAI with the approval of ABAI.";

  function validateEmail(emailAddressString) {
    var re =
      /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(emailAddressString.toLowerCase());
  }

  function isBlankOrEmpty(text) {
    return text.trim().length == 0;
  }

  function revealLinks() {
    var name = document.getElementsByName("diversityName")[0].value;
    var email = document.getElementsByName("diversityEmail")[0].value;
    var category = document.getElementById("diversityMemberCategory").value;
    var years = document.getElementById("diversityMemberDuration").value;
    var gender = document.getElementById("diversityMemberGender").value;
    var age = document.getElementById("diversityMemberAge").value;

    var racesArr = [];

    $.each($("input[name='diversitySelect']:checked"), function () {
      racesArr.push($(this).val());
    });

    var races = racesArr.join(",");

    if (name.split(/\w\w+/).length - 1 < 2) {
      alert("Please enter a full name (i.e., First and Last)!");
      return;
    } else if (!validateEmail(email)) {
      alert("Check email address in form (i.e., ***@***.***)!");
      return;
    } else if (isBlankOrEmpty(category)) {
      alert("Please select a category of membership!");
      return;
    } else if (isBlankOrEmpty(years)) {
      alert("Please indicate membership duration!");
      return;
    } else if (isBlankOrEmpty(gender)) {
      alert("Please indicate gender!");
      return;
    } else if (isBlankOrEmpty(age)) {
      alert("Please indicate age!");
      return;
    } else if (isBlankOrEmpty(races)) {
      alert("Please indicate race(s)/ethnicity(ies)!");
      return;
    } else if (!$("#codeConductCheck").prop("checked")) {
      alert("You must agree to abide by the SQAB code of conduct to continue.");
      return;
    }

    var currentdate = new Date();
    var datetime =
      "" +
      (currentdate.getMonth() + 1) +
      "/" +
      currentdate.getDate() +
      "/" +
      currentdate.getFullYear() +
      " @ " +
      currentdate.getHours() +
      ":" +
      currentdate.getMinutes() +
      ":" +
      currentdate.getSeconds();

    //var diversityFree = $("#diversityFree").prop("checked");
    var diversityFree = false;

    var data = {
      Name: name,
      Email: email,
      Type: category,
      Duration: years,
      Gender: gender,
      Age: age,
      Race: races,
      WaiveRate: diversityFree,
    };

    const dbRef = firebase.database().ref();
    const memberRef = dbRef.child("SQABMember2022");

    memberRef.push(data, function (error) {
      if (error) {
        alert(
          "Your registration information was not successfully recorded. Please try again later."
        );
      } else {
        document.getElementById("submitBtn").href = "#";
        document.getElementById("submitBtn").text = "Successfully Submitted";
        document.getElementById("submitBtn").className += " disabled";

        document.getElementById("membershipShow1").style.display = "block";
        document.getElementById("membershipShow2").style.display = "block";
        document.getElementById("membershipShow3").style.display = "block";

        alert(
          "Your information has been successfully recorded! Please follow the information posted below."
        );
      }
    });

    initPayPalButton();
  }

  function initPayPalButton() {
    var shipping = 0;
    var itemOptions = document.querySelector(
      "#smart-button-container #item-options"
    );
    var quantity = parseInt();
    var quantitySelect = document.querySelector(
      "#smart-button-container #quantitySelect"
    );
    if (!isNaN(quantity)) {
      quantitySelect.style.visibility = "visible";
    }
    var orderDescription = "Conference Registration";
    if (orderDescription === "") {
      orderDescription = "Item";
    }
    paypal
      .Buttons({
        style: {
          shape: "rect",
          color: "gold",
          layout: "vertical",
          label: "paypal",
        },
        createOrder: function (data, actions) {
          var selectedItemDescription =
            itemOptions.options[itemOptions.selectedIndex].value;
          var selectedItemPrice = parseFloat(
            itemOptions.options[itemOptions.selectedIndex].getAttribute("price")
          );
          var tax =
            0 === 0 || false ? 0 : selectedItemPrice * (parseFloat(0) / 100);
          if (quantitySelect.options.length > 0) {
            quantity = parseInt(
              quantitySelect.options[quantitySelect.selectedIndex].value
            );
          } else {
            quantity = 1;
          }

          tax *= quantity;
          tax = Math.round(tax * 100) / 100;
          var priceTotal =
            quantity * selectedItemPrice + parseFloat(shipping) + tax;
          priceTotal = Math.round(priceTotal * 100) / 100;
          var itemTotalValue =
            Math.round(selectedItemPrice * quantity * 100) / 100;

          return actions.order.create({
            purchase_units: [
              {
                description: orderDescription,
                amount: {
                  currency_code: "USD",
                  value: priceTotal,
                  breakdown: {
                    item_total: {
                      currency_code: "USD",
                      value: itemTotalValue,
                    },
                    shipping: {
                      currency_code: "USD",
                      value: shipping,
                    },
                    tax_total: {
                      currency_code: "USD",
                      value: tax,
                    },
                  },
                },
                items: [
                  {
                    name: selectedItemDescription,
                    unit_amount: {
                      currency_code: "USD",
                      value: selectedItemPrice,
                    },
                    quantity: quantity,
                  },
                ],
              },
            ],
          });
        },
        onApprove: function (data, actions) {
          return actions.order.capture().then(function (orderData) {
            // Full available details
            console.log(
              "Capture result",
              orderData,
              JSON.stringify(orderData, null, 2)
            );

            // Show a success message within this page, e.g.
            const element = document.getElementById("paypal-button-container");
            element.innerHTML = "";
            element.innerHTML = "<h3>Thank you for your payment!</h3>";

            // Or go to another URL:  actions.redirect('thank_you.html');
          });
        },
        onError: function (err) {
          console.log(err);
        },
      })
      .render("#paypal-button-container");
  }

  $(document).ready(() => {
    document
      .getElementById("codeConductCheck")
      .addEventListener("change", (event) => {
        $.confirm({
          title: "Commitment to Ethics and Diversity",
          boxWidth: "30%",
          useBootstrap: false,
          content: bodyContent,
          buttons: {
            Agree: {
              text: "I Agree",
              action: function (okBtn) {
                document.getElementById("codeConductCheck").disabled = true;
                //document.getElementById('registerBtn').disabled = false;
              },
            },
            Disagree: {
              text: "I Disagree",
              action: function (noBtn) {
                $("#codeConductCheck").prop("checked", false);
              },
            },
          },
        });
      });

    /*
    document
      .getElementById("diversityFree")
      .addEventListener("change", (event) => {
        if (event.target.checked) {
          $.dialog({
            title: "Free SQAB Membership",
            content:
              "Those who qualify for SQAB's free membership program SHOULD NOT click on the PayPal button revealed once their information is saved. Eligible attendees should instead proceed directly to BehaviorLive to register for the SQAB events.",
          });
        }
      });

      */
  });
</script>

<!--Main layout-->
<div class="container">
  <!--Header row-->
  <div class="row">
    <div class="col-md-12">
      <div class="jumbotron">
        <h2 class="h2-responsive">SQAB Membership and Registration (2022)</h2>
        <br />
        <p class="lead">
          SQAB 2022 Membership is $20 and is payable through PayPal or surface
          mail. The membership fee is separate from registration fees, which
          will be collected by the BehaviorLive hosting service.
        </p>

        <p class="lead">
          SQAB Membership includes six months of free electronic access to the
          Special Issue of Behavioural Processes, containing the proceedings of
          last year's SQAB meeting, beginning on the date of our conference.
        </p>
      </div>
    </div>
  </div>
  <!--/.Header row-->

  <!--Header row-->
  <div class="row">
    <div class="col-md-12">
      <div class="jumbotron">
        <h2 class="h2-responsive">Ethics and Diversity Policy</h2>
        <br />
        <p class="lead">
          The Society for the Quantitative Analyses of Behavior (SQAB)
          encourages diversity, inclusiveness, and freedom from discriminatory
          behavior in the field of behavioral science broadly, and within the
          organization specifically. Diversity refers to differences in race,
          ethnicity, sexual orientation, gender identity, age, country of
          origin, religious or spiritual beliefs, ability, and social and
          economic class.
        </p>

        <p class="lead">
          The ethics and diversity policy was approved by the SQAB Executive
          Board in 2018 and was based on those developed by ABAI with the
          approval of ABAI.
        </p>
      </div>
    </div>
  </div>
  <!--/.Header row-->

  <!--Header row-->
  <div class="row">
    <div class="col-md-12">
      <div class="jumbotron">
        <h2 class="h2-responsive">Terms of Registration</h2>
        <br />

        <p class="lead">
          All attendees at SQAB events are expected to abide by SQAB’s Ethics
          and Diversity policies. Discriminatory and derogatory language and
          behavior, as well as harassment of any kind, will not be tolerated at
          the SQAB conference.
        </p>

        <p class="lead">
          Anyone registering for the SQAB conference is required to accept the
          following:
        </p>

        <p class="lead">
          Your registration is acceptance of responsibility. By registering for
          the SQAB conference, you agree to abide by SQAB’s Ethics and Diversity
          policies and understand that discriminatory and derogatory language
          and behavior, as well as harassment of any kind, will not be tolerated
          at SQAB. Failure to comply with the policy could result in suspension
          of membership to SQAB, revocation of rights to attend or submit future
          work to SQAB, and/or removal from the event, pursuant to Board
          consensus in consideration of the violation.
        </p>

        <p class="lead">
          Terms of Registration were approved by the SQAB Executive Board in
          2018 and were based on those developed by ABAI with the approval of
          ABAI.
        </p>
      </div>
    </div>
  </div>
  <!--/.Header row-->

  <!--Header row
  <div class="row">
    <div class="col-md-12">
      <div class="jumbotron">
        <h2 class="h2-responsive">Membership Fee Waiver</h2>
        <br />

        <p class="lead">
          SQAB membership is $20 in addition to our conference registration fee.
          Our membership fee-waiver program is intended to facilitate
          participation at our annual meeting. Elsevier has generously provided
          us with a donation which we are putting towards this effort.
        </p>

        <p class="lead">Complimentary 2022 membership will be provided to:</p>

        <ul class="list-group">
          <li class="list-group-item">
            - Individuals who have been disadvantaged socially or economically
            due to historic and current racial inequity
          </li>
          <li class="list-group-item">
            - Individuals who have experienced financial hardship brought about
            by the COVID-19 pandemic
          </li>
        </ul>

        <p class="lead">
          If you qualify, please check the box below in the registration form to
          receive complimentary membership and be directed to SQAB's conference
          registration portal. Please also check the box below if you have
          already paid your 2022 membership fee through our website.
        </p>
      </div>
    </div>
  </div>
  Header row-->

  <!--Online Registration Fees row header-->
  <div class="row">
    <div class="col-sm-12">
      <h2 class="h2-responsive text-center">
        Online Membership and Registration
      </h2>
      <br />
    </div>
  </div>
  <!--/.Online Registration Fees row-->

  <!--Online Fees row-->
  <div class="row">
    <div class="col-sm-12">
      <div class="well">
        <h2 class="h2-responsive">Conference Registration</h2>
        <br />

        <p class="lead">
          All prospective attendees are asked provide demographic and historical
          information. Once information is provided in the fields below, a link
          to renew membership and register for SQAB 2022 will be provided.
        </p>

        <div class="panel panel-default noshadow">
          <form>
            <div class="form-group">
              <label htmlFor="diversityName" class="bmd-label-floating"
                >Name:</label
              >
              <input
                name="diversityName"
                type="text"
                class="form-control"
                placeholder="Firstname Lastname"
              />
            </div>

            <div class="form-group">
              <label htmlFor="diversityEmail" class="bmd-label-floating"
                >Corresponding Email:</label
              >
              <input
                name="diversityEmail"
                type="text"
                placeholder="member@company.com"
                class="form-control"
              />
            </div>

            <div class="form-group">
              <label for="diversityMemberCategory">SQAB Member Category:</label>
              <select class="form-control" id="diversityMemberCategory">
                <option hidden disabled selected value>
                  -- select an option --
                </option>
                <option>Student</option>
                <option>Post Doc</option>
                <option>Full</option>
                <option>Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="diversityMemberDuration"
                >How many years have you attended SQAB:</label
              >
              <select class="form-control" id="diversityMemberDuration">
                <option hidden disabled selected value>
                  -- select an option --
                </option>
                <option>0-1</option>
                <option>2-5</option>
                <option>6-10</option>
                <option>over 10</option>
              </select>
            </div>

            <div class="form-group">
              <label for="diversityMemberGender">What is your gender:</label>
              <select class="form-control" id="diversityMemberGender">
                <option hidden disabled selected value>
                  -- select an option --
                </option>
                <option>Female</option>
                <option>Male</option>
                <option>Nonbinary</option>
                <option>Prefer not to answer</option>
                <option>Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="diversityMemberAge">What is your age:</label>
              <select class="form-control" id="diversityMemberAge">
                <option hidden disabled selected value>
                  -- select an option --
                </option>
                <option>Less than 18 years</option>
                <option>18-20</option>
                <option>21-29</option>
                <option>30-39</option>
                <option>40-49</option>
                <option>50-59</option>
                <option>60-69</option>
                <option>70 or older</option>
                <option>Prefer not to answer</option>
              </select>
            </div>

            <div class="form-group">
              <label class="bmd-label-floating" style="color: #7f007f"
                >What is your race/ethnicity (Select all that apply):</label
              >
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="African American/Black"
                  id="diversitySelect1"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect1"
                  style="color: black"
                >
                  African American/Black
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Asian"
                  id="diversitySelect2"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect2"
                  style="color: black"
                >
                  Asian
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Caucasian/White"
                  id="diversitySelect3"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect3"
                  style="color: black"
                >
                  Caucasian/White
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Hispanic/Latino"
                  id="diversitySelect4"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect4"
                  style="color: black"
                >
                  Hispanic/Latino
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Middle Eastern/North African"
                  id="diversitySelect5"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect5"
                  style="color: black"
                >
                  Middle Eastern/North African
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Native American/American Indian/Alaska Native"
                  id="diversitySelect6"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect6"
                  style="color: black"
                >
                  Native American/American Indian/Alaska Native
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Native Hawaiian or Other Pacific Islander"
                  id="diversitySelect7"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect7"
                  style="color: black"
                >
                  Native Hawaiian or Other Pacific Islander
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Mixed Race"
                  id="diversitySelect8"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect8"
                  style="color: black"
                >
                  Mixed Race
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Prefer not to answer"
                  id="diversitySelect9"
                  name="diversitySelect"
                />
                <label
                  class="form-check-label"
                  for="diversitySelect9"
                  style="color: black"
                >
                  Prefer not to answer
                </label>
              </div>
            </div>

            <div class="form-group">
              <label class="bmd-label-floating" style="color: #7f007f"
                >SQAB Code of Conduct:</label
              >

              <div class="form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="codeConductCheck"
                />
                <label
                  class="form-check-label"
                  for="codeConductCheck"
                  style="color: black"
                  >I agree to abide by the SQAB Code of Conduct.</label
                >
              </div>
            </div>

            <!--
            <div class="form-group">
              <label class="bmd-label-floating" style="color: #7f007f">SQAB Free Membership Program:</label>

              <div class="form-check">
                <input type="checkbox" class="form-check-input" id="diversityFree" />
                <label class="form-check-label" for="diversityFree" style="color: black">I qualify for SQAB's free
                  membership program.</label>
              </div>
            </div>
          -->

            <a
              href="javascript: revealLinks()"
              id="submitBtn"
              class="btn btn-primary btn-block btn-raised"
              >Submit</a
            >
          </form>
        </div>
      </div>
    </div>
    <!--/.Online Fees row-->

    <!--Surface Registration Fees row-->
    <div class="row" style="display: none" id="membershipShow1">
      <div class="col-sm-12">
        <h2 class="h2-responsive text-center">Membership Renewal</h2>
        <br />
      </div>
    </div>
    <!--/.Surface Registration Fees row-->

    <div class="row" style="display: none" id="membershipShow2">
      <div class="col-md-12">
        <div class="well">
          <h2 class="h2-responsive">Membership Fees</h2>
          <br />
          <p class="lead">
            You can pay your 2022 membership dues using the button below below.
          </p>

          <p style="display: none">
            Note: the <strong>2022 Membership is $20</strong> unless you qualify
            for SQAB's free membership program.
          </p>

          <form
            action="https://www.paypal.com/cgi-bin/webscr"
            method="post"
            target="_blank"
          >
            <input type="hidden" name="cmd" value="_s-xclick" />
            <input
              type="hidden"
              name="hosted_button_id"
              value="YBJL75DR42QJC"
            />
            <input
              type="image"
              src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif"
              border="0"
              name="submit"
              style="display: block; margin: 0 auto"
              alt="PayPal - The safer, easier way to pay online!"
            />
            <img
              alt=""
              border="0"
              src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif"
              width="1"
              height="1"
            />
          </form>

          <div id="smart-button-container">
            <div style="text-align: center">
              <div style="margin-bottom: 1.25rem">
                <p>Conference Registration</p>
                <select id="item-options">
                  <option value="Student (+20 USD, Membership)" price="20">
                    Student (+20 USD, Membership) - 20 USD
                  </option>
                  <option
                    value="Student (+20 + 25 USD, Membership + Registration)"
                    price="45"
                  >
                    Student (+20 + 25 USD, Membership + Registration) - 45 USD
                  </option>
                  <option
                    value="Post-Doc/International (+20 USD, Membership)"
                    price="20"
                  >
                    Post-Doc/International (+20 USD, Membership) - 20 USD
                  </option>
                  <option
                    value="Post-Doc/International (+20 + 75 USD, Membership + Registration)"
                    price="95"
                  >
                    Post-Doc/International (+20 + 75 USD, Membership +
                    Registration) - 95 USD
                  </option>
                  <option
                    value="Post-Doc/International (+20 + 75 + 40 USD, Membership + Registration + CEU)"
                    price="135"
                  >
                    Post-Doc/International (+20 + 75 + 40 USD, Membership +
                    Registration + CEU) - 135 USD
                  </option>
                  <option value="Full (+20 USD, Membership)" price="20">
                    Full (+20 USD, Membership) - 20 USD
                  </option>
                  <option
                    value="Post-Doc/International (+20 + 100 USD, Membership + Registration)"
                    price="120"
                  >
                    Full (+20 + 100 USD, Membership + Registration) - 120 USD
                  </option>
                  <option
                    value="Post-Doc/International (+20 + 100 + 40 USD, Membership + Registration + CEU)"
                    price="160"
                  >
                    Full (+20 + 100 + 40 USD, Membership + Registration + CEU) -
                    160 USD
                  </option>
                </select>
                <select style="visibility: hidden" id="quantitySelect"></select>
              </div>
              <div id="paypal-button-container"></div>
            </div>
          </div>

          <p class="lead"></p>

          <!--
          <p class="lead">
            Once you have paid your 2021 membership dues, or if eligible to
            waive those fees, you should proceed to
            <a href="https://behaviorlive.com/sqab/home">BehaviorLive</a> to
            register for the 2021 annual conference.
          </p>
        --></div>
      </div>
    </div>

    <!--Information row-->
    <div class="row" style="display: none" id="membershipShow3">
      <div class="col-md-12">
        <div class="well">
          <h2 class="h2-responsive">Surface Mail Membership</h2>
          <br />
          <p class="lead">
            If you wish to pay your membership fees using surface mail, please
            make checks payable to
            <strong
              >The Society for the Quantitative Analyses of Behavior</strong
            >
            or <strong>SQAB</strong>. Regarding payment information, please
            refer to the table listed above to determine the appropriate
            payment.
          </p>

          <p class="lead">
            Please include the following along with your payment: Membership
            type, name, current affiliation, mailing address, email address, and
            phone number.
          </p>

          <p class="lead">
            2022 Membership can be sent to:<br /><br />
            Carla Lagorio<br />
            Psychology Department<br />
            University of Wisconsin-Eau Claire<br />
            Hibbard Humanities Hall 269<br />
            Eau Claire, WI 54702-4004​
          </p>
        </div>
      </div>
    </div>
    <!--/.Information row-->
  </div>

  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css"
  />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
</div>
